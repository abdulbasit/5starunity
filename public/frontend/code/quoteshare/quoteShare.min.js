!function(t){t.fn.quoteShare=function(s){return this.each(function(){var e=t(this).context.offsetTop+"-"+t(this).context.offsetLeft,o="qs-popup-"+e,i=t.extend({animation:75,background:"#262626",boxShadow:!0,minLength:1,maxLength:500,twitterColor:"#ffffff",twitterElipses:!0,twitterHashtags:"",twitterVia:"",twitterUrl:""},s);t("body").append('<div id="'+o+'">'),t("#"+o).css({background:i.background,"font-size":"24px",height:"40px",width:"40px","border-radius":"4px",padding:"9px","padding-top":"10px","box-sizing":"border-box"}),i.boxShadow&&t("#"+o).css({"box-shadow":"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)"}),t("#"+o).append('<a class="qs-sharelink qs-twitter qs-twitter-'+e+'"><i class="fa fa-twitter share-icon" aria-hidden="true"></i></a>'),t(".qs-sharelink").css({"z-index":1,cursor:"pointer",position:"absolute"}),t("a.qs-twitter-"+e).css({color:i.twitterColor}),t(".share-icon").css({"margin-top":"-3px",position:"absolute"}),t("#"+o).append('<div class="qs-popup-arrow-'+e+'">&nbsp;</div>'),t(".qs-popup-arrow-"+e).css({background:i.background,width:"20px",height:"20px",margin:"0 auto","margin-top":"12px",transform:"rotate(45deg)"});var a={position:"absolute",top:"-10000px",left:"-10000px"};t("#"+o).css(a).slideUp().addClass("qs-popup-hidden").removeClass("qs-popup-shown");t(this).mouseup(function(s){var e=window.getSelection(),p=e.toString(),r=p.length,n=e.getRangeAt(0).cloneRange(),d=n.getClientRects()[0],h=d.left,l=d.top,c=d.right,u=(h+c)/2,w=t(window).scrollTop(),g=p.replace(/(\r\n|\n|\r)/gm,"").trim(),p=g,f={top:l+w-50,left:u-20};if(r>i.minLength&&r<i.maxLength){if(t("#"+o).css(f).slideDown(i.animation).addClass("qs-popup-shown").removeClass("qs-popup-hidden"),1==i.twitterElipses){for(var x=p.length+2,m=i.twitterVia.length,b=i.twitterHashtags.split(","),q=[],v=0;v<b.length;v++){var C=" #"+b[v].trim(),k=C.length;q.push(k)}var U=0;t.each(q,function(){U+=this}),U<3&&(U=0);var L=0;m>0&&(L=m+6);var S=x+L+U+24,y=S-140;if(y>0){var H=p.substr(0,p.length-(y+3));p=H+"..."}}var V='http://twitter.com/share?text="'+p+'"',z="",R="",T="";""!=i.twitterVia&&(z="&amp;via="+i.twitterVia),""!=i.twitterHashtags&&(R="&amp;hashtags="+i.twitterHashtags),""!=i.twitterUrl&&(T="&amp;url="+i.twitterUrl);var E=V.concat(z,R,T);t("a.qs-twitter").attr("onclick","popUp=window.open('"+E+"','popupwindow','scrollbars=yes,width=600,height=250');popUp.focus();return false")}else t("#"+o).css(a).slideUp().addClass("qs-popup-hidden").removeClass("qs-popup-shown")}),t("body").mousedown(function(){t("#"+o).hasClass("qs-popup-shown")&&setTimeout(function(){t("#"+o).css(a).slideUp().removeClass("qs-popup-shown").addClass("qs-popup-hidden")},200)})})}}(jQuery);